var Y=Object.defineProperty;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var z=(t,e,r)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A=(t,e)=>{for(var r in e||(e={}))X.call(e,r)&&z(t,r,e[r]);if(N)for(var r of N(e))q.call(e,r)&&z(t,r,e[r]);return t};var k=(t,e,r)=>new Promise((o,n)=>{var i=f=>{try{b(r.next(f))}catch(T){n(T)}},m=f=>{try{b(r.throw(f))}catch(T){n(T)}},b=f=>f.done?o(f.value):Promise.resolve(f.value).then(i,m);b((r=r.apply(t,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function V(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}function L(...t){t.forEach(e=>e.style.display="inherit")}function E(...t){t.forEach(e=>e.style.display="none")}function W(t,e){return{VerticalBottomToTop:()=>{const r=[];let o=e+0,n=3;for(;--o>-1&&r.length<n;)r.push([t,o]);for(r.reverse(),r.push([t,e]),o=e+0,n=r.length+3;++o<8&&r.length<n;)r.push([t,o]);return r},HorizontalLeftToRight:()=>{const r=[];let o=t+0,n=3;for(;--o>-1&&r.length<n;)r.push([o,e]);for(r.reverse(),r.push([t,e]),o=t+0,n=r.length+3;++o<8&&r.length<n;)r.push([o,e]);return r},DiagonalBottomLeftToTopRight:()=>{const r=[];let o=t+0,n=e+0,i=3;for(;--o>-1&&--n>-1&&r.length<i;)r.push([o,n]);for(r.reverse(),r.push([t,e]),o=t+0,n=e+0,i=r.length+3;++o<8&&++n<8&&r.length<i;)r.push([o,n]);return r},DiagonalTopLeftToBottomRight:()=>{const r=[];let o=t+0,n=e+0,i=3;for(;--o>-1&&++n<8&&r.length<i;)r.push([o,n]);for(r.reverse(),r.push([t,e]),o=t+0,n=e+0,i=r.length+3;++o<8&&--n>-1&&r.length<i;)r.push([o,n]);return r}}}function B(t,e){const r=W(t,e);return[r.DiagonalBottomLeftToTopRight(),r.DiagonalTopLeftToBottomRight(),r.HorizontalLeftToRight(),r.VerticalBottomToTop()].filter(o=>o.length>=4).reduce((o,n)=>(n.length>4?(o.push(n.slice(0,4)),o.push(n.reverse().slice(0,4).reverse())):o.push(n),o),[])}function P(t,e=!1){return k(this,null,function*(){return new Promise((r,o)=>setTimeout(()=>e?o():r(),t))})}function $(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}const v={player1:"player1",player2:"player2"},M={dropSpeed:400,defaultState:{currentPlayer:v.player1,aiPlayers:[v.player2],history:[],checkers:[],active:!1}};Object.freeze(v);Object.freeze(M);const w=t=>Array.from(document.querySelectorAll(t)),d=t=>w(t)[0];function I(){const t=r(),e=A({},M.defaultState);function r(){const s={board:d("#board"),blocker:d("#board .blocker"),gameOver:d("#game-over"),gameTie:d("#game-tie"),gameStart:d("#game-start"),resetButtons:w(".reset-btn"),startButton:d("#start-btn"),buttons:w("#board button"),spacesWrapper:w("#board .spaces"),turnColor:w(".turn-color"),checkerTemplate:d("#template .checker"),checkers:[]};return s.startButton.onclick=n,s.resetButtons.forEach(a=>a.onclick=i),s.buttons.forEach((a,c)=>a.onclick=()=>C(c)),Object.freeze(s),s}function o(s){e.active=s,[...t.resetButtons,...t.buttons].forEach(a=>{a.disabled=s})}function n(){E(t.gameStart),t.board.className="turn-"+e.currentPlayer}function i(){if(e.active)return;const s=M.dropSpeed*2;e.checkers.forEach(a=>{a.style.transition=`top ${s}ms linear`,a.style.top=window.outerHeight+window.outerHeight/2+"px"}),P(s).then(()=>e.checkers.forEach(a=>a.remove())),f(M.defaultState),t.board.className="turn-"+e.currentPlayer,E(t.gameOver),E(t.gameTie)}function m(s,a){return(e.history.find(c=>c.x===s&&c.y===a)||{}).player}function b(s,a,c){f({history:[...e.history,{x:s,y:a,player:c}]})}function f(s){return Object.assign(e,s)}function T(s,a){return B(s,a).some(h=>h.every(l=>m(...l)===e.currentPlayer))}function j(){return e.history.length===64}function C(s){return k(this,null,function*(){L(t.blocker);const a=O(s);return a<0?Promise.resolve():(yield D(s,a),b(s,a,e.currentPlayer),E(t.blocker),T(s,a)?P(250).then(()=>{L(t.gameOver)}):j()?P(250).then(()=>{L(t.gameTie)}):(H(),e.aiPlayers.includes(e.currentPlayer)?F():yield Promise.resolve()))})}function D(s,a){return k(this,null,function*(){o(!0),a=Math.abs(a-7)+1;const c=M.dropSpeed/8*a,h=t.checkerTemplate.cloneNode(!0);t.board.appendChild(h);const l=t.board.lastChild;return e.checkers.push(l),l.style.transform="rotate("+$(1,360)+"deg)",l.classList.add(e.currentPlayer),setTimeout(()=>{l.style.transition=""},c+100),l.style.transition=`top ${c}ms linear`,l.style.left=s*9+"vmin",l.style.display="",P(50).then(()=>(l.style.top=a*9+"vmin",P(c+300).then(()=>(o(!1),!0))))})}function O(s){for(let a=0;a<8;a++)if(!m(s,a))return a;return-1}function F(){const s=e.history[e.history.length-1],a=(R,g)=>R.map(u=>({matches:u.filter(p=>m(...p)===g).length,moves:u.filter(p=>O(p[0])===p[1])})).filter(u=>u.moves.length>0).sort((u,p)=>u.matches===p.matches?u.moves>p.moves?-1:u.moves<p.moves?1:0:u.matches>p.matches?-1:u.matches<p.matches?1:0),c=e.history.length?B(s.x,s.y):[];let h=null;const l=a(c,s.player);if(l.length&&l.some(R=>{let g=R.moves[0];if(g[1]===7)return h=g[0],!0;const u=[g[0],g[1]+1];if(B(u[0],u[1]).map(y=>({matches:y.filter(S=>m(...S)===s.player).length})).sort((y,S)=>y.matches>S.matches?-1:y.matches<S.matches?1:0).every(y=>y.matches<3))return h=g[0],!0}),!h)for(h=V(0,7);O(h)===-1;)++h>7&&(h=0);return C(h)}function H(){const s=e.currentPlayer===v.player1?v.player2:v.player1;f({currentPlayer:s});const a=s[0].toUpperCase()+s.substr(1);return t.board.className="turn-"+s,t.turnColor.forEach(c=>c.innerText=a),Promise.resolve()}}I();
